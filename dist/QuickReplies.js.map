{"version":3,"sources":["../src/QuickReplies.js"],"names":["QuickReplies","quickreplies","_quickReplies","Array","isArray","forEach","add","reply","text","data","event","image","isLocation","Error","push","quickReplies","contentType","payload","pill","title","String","content_type","image_url","length","array","arg"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;;;IAEMA,Y;AACJ,wBAAYC,YAAZ,EAA0B;AAAA;;AAAA;;AACxB,SAAKC,aAAL,GAAqB,EAArB;;AAEA,QAAID,gBAAgB,IAApB,EAA0B;AACxB,UAAIE,MAAMC,OAAN,CAAcH,YAAd,CAAJ,EAAiC;AAC/BA,qBAAaI,OAAb,CAAqB;AAAA,iBAAS,MAAKC,GAAL,CAASC,KAAT,CAAT;AAAA,SAArB;AACD,OAFD,MAEO;AACL,aAAKD,GAAL,CAASL,YAAT;AACD;AACF;AACF;;;;8BAE2C;AAAA,UAAvCO,IAAuC,QAAvCA,IAAuC;AAAA,UAAjCC,IAAiC,QAAjCA,IAAiC;AAAA,UAA3BC,KAA2B,QAA3BA,KAA2B;AAAA,UAApBC,KAAoB,QAApBA,KAAoB;AAAA,UAAbC,UAAa,QAAbA,UAAa;;AAC1C,UAAI,CAACH,IAAD,IAAS,CAACC,KAAV,IAAmB,CAACE,UAAxB,EAAoC;AAClC,cAAMC,MAAM,qCAAN,CAAN;AACD;;AAED,WAAKX,aAAL,CAAmBY,IAAnB,CAAwB,EAACN,MAAMA,IAAP,EAAaE,YAAb,EAAoBD,UAApB,EAA0BE,YAA1B,EAAiCC,sBAAjC,EAAxB;AACA,aAAO,IAAP;AACD;;;6BAEQ;AACP,UAAMG,eAAe,EAArB;AADO;AAAA;AAAA;;AAAA;AAEP,wDAAoB,KAAKb,aAAzB,4GAAwC;AAAA,cAA7BK,KAA6B;;AACtC,cAAIS,cAAc,MAAlB;AACA,cAAMC,UAAU,yBAAe,EAACR,MAAMF,MAAME,IAAb,EAAmBC,OAAOH,MAAMG,KAAhC,EAAf,CAAhB;AACA,cAAI,CAACH,MAAMC,IAAX,EAAiB;AACf,kBAAM,IAAIK,KAAJ,CAAU,mBAAV,CAAN;AACD;AACD,cAAIN,MAAMK,UAAV,EAAsB;AACpBI,0BAAc,UAAd;AACD;AACD,cAAIE,OAAO,EAACD,gBAAD,EAAUE,OAAO,gBAAIC,OAAOb,MAAMC,IAAb,CAAJ,EAAwB,EAAxB,CAAjB,EAA8Ca,cAAcL,WAA5D,EAAX;AACA,cAAIT,MAAMI,KAAV,EAAiB;AACfO,iBAAKI,SAAL,GAAiBf,MAAMI,KAAvB;AACD;AACDI,uBAAaD,IAAb,CAAkBI,IAAlB;AACD;AAhBM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAkBP,aAAOH,YAAP;AACD;;;wBAQY;AACX,aAAO,KAAKb,aAAL,CAAmBqB,MAA1B;AACD;;;yBARWC,K,EAAO;AACjB,UAAMvB,eAAe,IAAID,YAAJ,EAArB;AACAwB,YAAMnB,OAAN,CAAc;AAAA,eAAOJ,aAAaK,GAAb,CAAiBmB,GAAjB,CAAP;AAAA,OAAd;AACA,aAAOxB,YAAP;AACD;;;;;kBAOYD,Y","file":"QuickReplies.js","sourcesContent":["import {cut} from './libs/utils';\r\n\r\nclass QuickReplies {\r\n  constructor(quickreplies) {\r\n    this._quickReplies = [];\r\n\r\n    if (quickreplies != null) {\r\n      if (Array.isArray(quickreplies)) {\r\n        quickreplies.forEach(reply => this.add(reply));\r\n      } else {\r\n        this.add(quickreplies);\r\n      }\r\n    }\r\n  }\r\n\r\n  add({text, data, event, image, isLocation}) {\r\n    if (!data && !event && !isLocation) {\r\n      throw Error('Must provide data i.e. {data: null}');\r\n    }\r\n\r\n    this._quickReplies.push({text: text, event, data, image, isLocation});\r\n    return this;\r\n  }\r\n\r\n  toJSON() {\r\n    const quickReplies = [];\r\n    for (const reply of this._quickReplies) {\r\n      let contentType = 'text';\r\n      const payload = JSON.stringify({data: reply.data, event: reply.event});\r\n      if (!reply.text) {\r\n        throw new Error('No text attribute');\r\n      }\r\n      if (reply.isLocation) {\r\n        contentType = 'location';\r\n      }\r\n      let pill = {payload, title: cut(String(reply.text), 20), content_type: contentType};\r\n      if (reply.image) {\r\n        pill.image_url = reply.image;\r\n      }\r\n      quickReplies.push(pill);\r\n    }\r\n\r\n    return quickReplies;\r\n  }\r\n\r\n  static from(array) {\r\n    const quickreplies = new QuickReplies();\r\n    array.forEach(arg => quickreplies.add(arg));\r\n    return quickreplies;\r\n  }\r\n\r\n  get length() {\r\n    return this._quickReplies.length;\r\n  }\r\n}\r\n\r\nexport default QuickReplies;\r\n"]}