{"version":3,"sources":["../src/Buttons.js"],"names":["Buttons","buttons","_buttons","Array","isArray","forEach","add","button","data","url","event","phone","share","Error","text","push","account_linking","linking","type","title","messenger_extensions","webview_height_ratio","payload","options","length","array","arg"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAMA,O;AACJ,mBAAYC,OAAZ,EAAqB;AAAA;;AAAA;;AACnB,SAAKC,QAAL,GAAgB,EAAhB;;AAEA,QAAID,WAAW,IAAf,EAAqB;AACnB,UAAIE,MAAMC,OAAN,CAAcH,OAAd,CAAJ,EAA4B;AAC1BA,gBAAQI,OAAR,CAAgB;AAAA,iBAAU,MAAKC,GAAL,CAASC,MAAT,CAAV;AAAA,SAAhB;AACD,OAFD,MAEO;AACL,aAAKD,GAAL,CAASL,OAAT;AACD;AACF;AACF;;;;wBAEGM,M,EAAQ;AACV,UAAI,CAACA,OAAOC,IAAR,IAAgB,CAACD,OAAOE,GAAxB,IAA+B,CAACF,OAAOG,KAAvC,IAAgD,CAACH,OAAOI,KAAxD,IAAiE,CAACJ,OAAOK,KAA7E,EAAoF;AAClF,cAAMC,MACJ,+EADI,CAAN;AAGD;AACD,UAAMX,WAAW,sBAAc;AAC7BY,cAAMP,OAAOO,IAAP,IAAe;AADQ,OAAd,EAEdP,MAFc,CAAjB;;AAIA,WAAKL,QAAL,CAAca,IAAd,CAAmBb,QAAnB;AACA,aAAO,IAAP;AACD;;;6BAEQ;AACP,UAAMD,UAAU,EAAhB;AADO;AAAA;AAAA;;AAAA;AAEP,wDAAqB,KAAKC,QAA1B,4GAAoC;AAAA,cAAzBK,MAAyB;;AAClC,cAAIA,OAAOS,eAAX,EAA4B;AAC1B,gBAAI,CAACT,OAAOS,eAAP,CAAuBC,OAA5B,EAAqC;AACnChB,sBAAQc,IAAR,CAAa,EAAEG,MAAM,gBAAR,EAAb;AACD,aAFD,MAEO,IAAIX,OAAOE,GAAX,EAAgB;AACrBR,sBAAQc,IAAR,CAAa,EAAEG,MAAM,cAAR,EAAwBT,KAAKF,OAAOE,GAApC,EAAb;AACD,aAFM,MAEA;AACL,oBAAMI,MAAM,iCAAN,CAAN;AACD;AACF,WARD,MAQO,IAAIN,OAAOE,GAAX,EAAgB;AACrBR,oBAAQc,IAAR,CAAa;AACXG,oBAAM,SADK;AAEXT,mBAAKF,OAAOE,GAFD;AAGXU,qBAAOZ,OAAOO,IAHH;AAIXM,oCAAsBb,OAAOa,oBAJlB;AAKXC,oCAAsBd,OAAOc,oBAAP,IAA+B;AAL1C,aAAb;AAOD,WARM,MAQA,IAAId,OAAOC,IAAP,IAAe,IAAnB,EAAyB;AAC9B,gBAAMc,UAAU,yBAAe;AAC7Bd,oBAAMD,OAAOC,IADgB;AAE7BE,qBAAOH,OAAOG;AAFe,aAAf,CAAhB;AAIAT,oBAAQc,IAAR,CAAa;AACXG,oBAAM,UADK;AAEXI,8BAFW;AAGXH,qBAAOZ,OAAOO,IAHH;AAIXS,uBAAShB,OAAOgB;AAJL,aAAb;AAMD,WAXM,MAWA,IAAIhB,OAAOK,KAAX,EAAkB;AACvBX,oBAAQc,IAAR,CAAa,EAAEG,MAAM,eAAR,EAAb;AACD,WAFM,MAEA,IAAIX,OAAOI,KAAX,EAAkB;AACvBV,oBAAQc,IAAR,CAAa;AACXG,oBAAM,cADK;AAEXI,uBAASf,OAAOI,KAFL;AAGXQ,qBAAOZ,OAAOO;AAHH,aAAb;AAKD;AACF;AAvCM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAyCP,aAAOb,OAAP;AACD;;;wBAQY;AACX,aAAO,KAAKC,QAAL,CAAcsB,MAArB;AACD;;;yBARWC,K,EAAO;AACjB,UAAMxB,UAAU,IAAID,OAAJ,EAAhB;AACAyB,YAAMpB,OAAN,CAAc;AAAA,eAAOJ,QAAQK,GAAR,CAAYoB,GAAZ,CAAP;AAAA,OAAd;AACA,aAAOzB,OAAP;AACD;;;;;kBAOYD,O","file":"Buttons.js","sourcesContent":["class Buttons {\n  constructor(buttons) {\n    this._buttons = [];\n\n    if (buttons != null) {\n      if (Array.isArray(buttons)) {\n        buttons.forEach(button => this.add(button));\n      } else {\n        this.add(buttons);\n      }\n    }\n  }\n\n  add(button) {\n    if (!button.data && !button.url && !button.event && !button.phone && !button.share) {\n      throw Error(\n        \"Must provide a url or data i.e. {data: null} or {url: 'https://facebook.com'}\"\n      );\n    }\n    const _buttons = Object.assign({\n      text: button.text || \"Button\"\n    }, button)\n\n    this._buttons.push(_buttons);\n    return this;\n  }\n\n  toJSON() {\n    const buttons = [];\n    for (const button of this._buttons) {\n      if (button.account_linking) {\n        if (!button.account_linking.linking) {\n          buttons.push({ type: \"account_unlink\" });\n        } else if (button.url) {\n          buttons.push({ type: \"account_link\", url: button.url });\n        } else {\n          throw Error(\"Missing url for account linking\");\n        }\n      } else if (button.url) {\n        buttons.push({\n          type: \"web_url\",\n          url: button.url,\n          title: button.text,\n          messenger_extensions: button.messenger_extensions,\n          webview_height_ratio: button.webview_height_ratio || \"full\"\n        });\n      } else if (button.data != null) {\n        const payload = JSON.stringify({\n          data: button.data,\n          event: button.event\n        });\n        buttons.push({\n          type: \"postback\",\n          payload,\n          title: button.text,\n          options: button.options\n        });\n      } else if (button.share) {\n        buttons.push({ type: \"element_share\" });\n      } else if (button.phone) {\n        buttons.push({\n          type: \"phone_number\",\n          payload: button.phone,\n          title: button.text\n        });\n      }\n    }\n\n    return buttons;\n  }\n\n  static from(array) {\n    const buttons = new Buttons();\n    array.forEach(arg => buttons.add(arg));\n    return buttons;\n  }\n\n  get length() {\n    return this._buttons.length;\n  }\n}\n\nexport default Buttons;\n"]}