{"version":3,"sources":["../src/Buttons.js"],"names":["Buttons","buttons","_buttons","Array","isArray","forEach","add","button","text","data","url","phone","event","share","account_linking","webview_height_ratio","messenger_extensions","options","Error","push","linking","type","title","payload","length","array","arg"],"mappings":"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","file":"Buttons.js","sourcesContent":["class Buttons {\r\n  constructor(buttons) {\r\n    this._buttons = [];\r\n\r\n    if (buttons != null) {\r\n      if (Array.isArray(buttons)) {\r\n        buttons.forEach(button => this.add(button));\r\n      } else {\r\n        this.add(buttons);\r\n      }\r\n    }\r\n  }\r\n\r\n  add({\r\n    text,\r\n    data,\r\n    url,\r\n    phone,\r\n    event,\r\n    share,\r\n    account_linking,\r\n    webview_height_ratio,\r\n    messenger_extensions,\r\n    options\r\n  }) {\r\n    if (!data && !url && !event && !phone && !share) {\r\n      throw Error(\r\n        \"Must provide a url or data i.e. {data: null} or {url: 'https://facebook.com'}\"\r\n      );\r\n    }\r\n\r\n    this._buttons.push({\r\n      text: text || \"Button\",\r\n      event,\r\n      data,\r\n      phone,\r\n      share,\r\n      url,\r\n      account_linking,\r\n      webview_height_ratio,\r\n      options,\r\n      messenger_extensions\r\n    });\r\n    return this;\r\n  }\r\n\r\n  toJSON() {\r\n    const buttons = [];\r\n    for (const button of this._buttons) {\r\n      if (button.account_linking) {\r\n        if (!button.account_linking.linking) {\r\n          buttons.push({ type: \"account_unlink\" });\r\n        } else if (button.url) {\r\n          buttons.push({ type: \"account_link\", url: button.url });\r\n        } else {\r\n          throw Error(\"Missing url for account linking\");\r\n        }\r\n      } else if (button.url) {\r\n        buttons.push({\r\n          type: \"web_url\",\r\n          url: button.url,\r\n          title: button.text,\r\n          messenger_extensions: button.messenger_extensions,\r\n          webview_height_ratio: button.webview_height_ratio || \"full\"\r\n        });\r\n      } else if (button.data != null) {\r\n        const payload = JSON.stringify({\r\n          data: button.data,\r\n          event: button.event\r\n        });\r\n        buttons.push({\r\n          type: \"postback\",\r\n          payload,\r\n          title: button.text,\r\n          options: button.options\r\n        });\r\n      } else if (button.share) {\r\n        buttons.push({ type: \"element_share\" });\r\n      } else if (button.phone) {\r\n        buttons.push({\r\n          type: \"phone_number\",\r\n          payload: button.phone,\r\n          title: button.text\r\n        });\r\n      }\r\n    }\r\n\r\n    return buttons;\r\n  }\r\n\r\n  static from(array) {\r\n    const buttons = new Buttons();\r\n    array.forEach(arg => buttons.add(arg));\r\n    return buttons;\r\n  }\r\n\r\n  get length() {\r\n    return this._buttons.length;\r\n  }\r\n}\r\n\r\nexport default Buttons;\r\n"]}