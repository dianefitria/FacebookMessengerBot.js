{"version":3,"sources":["../src/Buttons.js"],"names":["Buttons","_buttons","text","data","url","phone","event","share","account_linking","webview_height_ratio","Error","push","buttons","button","linking","type","title","payload","length","array","forEach","add","arg"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;IAAMA,O;AACJ,qBAAc;AAAA;;AACZ,SAAKC,QAAL,GAAgB,EAAhB;AACD;;;;8BAEkF;AAAA,UAA9EC,IAA8E,QAA9EA,IAA8E;AAAA,UAAxEC,IAAwE,QAAxEA,IAAwE;AAAA,UAAlEC,GAAkE,QAAlEA,GAAkE;AAAA,UAA7DC,KAA6D,QAA7DA,KAA6D;AAAA,UAAtDC,KAAsD,QAAtDA,KAAsD;AAAA,UAA/CC,KAA+C,QAA/CA,KAA+C;AAAA,UAAxCC,eAAwC,QAAxCA,eAAwC;AAAA,UAAvBC,oBAAuB,QAAvBA,oBAAuB;;AACjF,UAAI,CAACN,IAAD,IAAS,CAACC,GAAV,IAAiB,CAACE,KAAlB,IAA2B,CAACD,KAA5B,IAAqC,CAACE,KAA1C,EAAiD;AAC/C,cAAMG,MAAM,iFAAN,CAAN;AACD;;AAED,WAAKT,QAAL,CAAcU,IAAd,CAAmB,EAACT,MAAMA,QAAQ,QAAf,EAAyBI,YAAzB,EAAgCH,UAAhC,EAAsCE,YAAtC,EAA6CE,YAA7C,EAAoDH,QAApD,EAAyDI,gCAAzD,EAA0EC,0CAA1E,EAAnB;AACA,aAAO,IAAP;AACD;;;6BAEQ;AACP,UAAMG,UAAU,EAAhB;AADO;AAAA;AAAA;;AAAA;AAEP,wDAAqB,KAAKX,QAA1B,4GAAoC;AAAA,cAAzBY,MAAyB;;AAClC,cAAIA,OAAOL,eAAX,EAA4B;AAC1B,gBAAI,CAACK,OAAOL,eAAP,CAAuBM,OAA5B,EAAqC;AACnCF,sBAAQD,IAAR,CAAa,EAACI,MAAM,gBAAP,EAAb;AACD,aAFD,MAEO,IAAIF,OAAOT,GAAX,EAAgB;AACrBQ,sBAAQD,IAAR,CAAa,EAACI,MAAM,cAAP,EAAuBX,KAAKS,OAAOT,GAAnC,EAAb;AACD,aAFM,MAEA;AACL,oBAAMM,MAAM,iCAAN,CAAN;AACD;AACF,WARD,MAQO,IAAIG,OAAOT,GAAX,EAAgB;AACrBQ,oBAAQD,IAAR,CAAa,EAACI,MAAM,SAAP,EAAkBX,KAAKS,OAAOT,GAA9B,EAAmCY,OAAOH,OAAOX,IAAjD,EAAuDO,sBAAsBI,OAAOJ,oBAAP,IAA+B,MAA5G,EAAb;AACD,WAFM,MAEA,IAAII,OAAOV,IAAP,IAAe,IAAnB,EAAyB;AAC9B,gBAAMc,UAAU,yBAAe,EAACd,MAAMU,OAAOV,IAAd,EAAoBG,OAAOO,OAAOP,KAAlC,EAAf,CAAhB;AACAM,oBAAQD,IAAR,CAAa,EAACI,MAAM,UAAP,EAAmBE,gBAAnB,EAA4BD,OAAOH,OAAOX,IAA1C,EAAb;AACD,WAHM,MAGA,IAAIW,OAAON,KAAX,EAAkB;AACvBK,oBAAQD,IAAR,CAAa,EAACI,MAAM,eAAP,EAAb;AACD,WAFM,MAEA,IAAIF,OAAOR,KAAX,EAAkB;AACvBO,oBAAQD,IAAR,CAAa,EAACI,MAAM,cAAP,EAAuBE,SAASJ,OAAOR,KAAvC,EAA8CW,OAAOH,OAAOX,IAA5D,EAAb;AACD;AACF;AArBM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAuBP,aAAOU,OAAP;AACD;;;wBAQY;AACX,aAAO,KAAKX,QAAL,CAAciB,MAArB;AACD;;;yBARWC,K,EAAO;AACjB,UAAMP,UAAU,IAAIZ,OAAJ,EAAhB;AACAmB,YAAMC,OAAN,CAAc;AAAA,eAAOR,QAAQS,GAAR,CAAYC,GAAZ,CAAP;AAAA,OAAd;AACA,aAAOV,OAAP;AACD;;;;;kBAOYZ,O","file":"Buttons.js","sourcesContent":["class Buttons {\r\n  constructor() {\r\n    this._buttons = [];\r\n  }\r\n\r\n  add({text, data, url, phone, event, share, account_linking, webview_height_ratio}) {\r\n    if (!data && !url && !event && !phone && !share) {\r\n      throw Error('Must provide a url or data i.e. {data: null} or {url: \\'https://facebook.com\\'}');\r\n    }\r\n\r\n    this._buttons.push({text: text || 'Button', event, data, phone, share, url, account_linking, webview_height_ratio});\r\n    return this;\r\n  }\r\n\r\n  toJSON() {\r\n    const buttons = [];\r\n    for (const button of this._buttons) {\r\n      if (button.account_linking) {\r\n        if (!button.account_linking.linking) {\r\n          buttons.push({type: 'account_unlink'});\r\n        } else if (button.url) {\r\n          buttons.push({type: 'account_link', url: button.url});\r\n        } else {\r\n          throw Error('Missing url for account linking');\r\n        }\r\n      } else if (button.url) {\r\n        buttons.push({type: 'web_url', url: button.url, title: button.text, webview_height_ratio: button.webview_height_ratio || 'full'});\r\n      } else if (button.data != null) {\r\n        const payload = JSON.stringify({data: button.data, event: button.event});\r\n        buttons.push({type: 'postback', payload, title: button.text});\r\n      } else if (button.share) {\r\n        buttons.push({type: 'element_share'});\r\n      } else if (button.phone) {\r\n        buttons.push({type: 'phone_number', payload: button.phone, title: button.text});\r\n      }\r\n    }\r\n\r\n    return buttons;\r\n  }\r\n\r\n  static from(array) {\r\n    const buttons = new Buttons();\r\n    array.forEach(arg => buttons.add(arg));\r\n    return buttons;\r\n  }\r\n\r\n  get length() {\r\n    return this._buttons.length;\r\n  }\r\n}\r\n\r\nexport default Buttons;\r\n"]}